<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#0d6efd" />
    <meta name="description" content="Arctic Gynae Centre - Expert women's healthcare with compassion and excellence" />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Arctic Gynae" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="msapplication-TileColor" content="#0d6efd" />
    <meta name="msapplication-tap-highlight" content="no" />
    
    <!-- Preload critical resources -->
    <link rel="preload" href="%PUBLIC_URL%/fonts/your-main-font.woff2" as="font" type="font/woff2" crossorigin />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link rel="dns-prefetch" href="https://maps.googleapis.com" />
    
    <!-- Preload main CSS -->
    <link rel="preload" href="%PUBLIC_URL%/css/main.css" as="style" onload="this.rel='stylesheet'" />
    <noscript><link rel="stylesheet" href="%PUBLIC_URL%/css/main.css" /></noscript>
    
    <!-- Preload critical scripts -->
    <link rel="preload" as="script" href="%PUBLIC_URL%/static/js/runtime-main.js" />
    <link rel="preload" as="script" href="%PUBLIC_URL%/static/js/main.js" />
    
    <title>Arctic Gynae Centre - Women's Healthcare Specialists</title>
    
    <!-- Preload critical assets -->
    <link rel="preload" as="image" href="%PUBLIC_URL%/images/hero-bg.jpg" />
    <link rel="preload" as="image" href="%PUBLIC_URL%/logo192.png" />
    
    <!-- Inline critical CSS -->
    <style>
      /* Critical CSS for above-the-fold content */
      html { scroll-behavior: smooth; }
      body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
      code { font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace; }
      
      /* Ensure content is hidden until fonts are loaded */
      .font-loading body { visibility: hidden; }
      .font-loaded body { visibility: visible; }
      
      /* Optimize font loading */
      @font-face {
        font-family: 'YourMainFont';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: local('YourMainFont'),
             url('%PUBLIC_URL%/fonts/your-main-font.woff2') format('woff2');
      }
      
      /* Smooth scrolling for anchor links */
      html { scroll-behavior: smooth; }
      
      /* Focus styles for accessibility */
      :focus-visible { outline: 3px solid #0d6efd; outline-offset: 2px; }
      button:focus-visible, [role="button"]:focus-visible, a:focus-visible {
        position: relative; z-index: 1;
        box-shadow: 0 0 0 3px #fff, 0 0 0 6px #0d6efd;
      }
    </style>
    
    <!-- Preload the main page's JavaScript -->
    <link rel="preload" as="script" href="%PUBLIC_URL%/static/js/main.chunk.js" />
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    
    <script>
      // Track font loading
      document.documentElement.classList.add('font-loading');
      
      // Optimize long tasks
      if (window.requestIdleCallback) {
        window.requestIdleCallback(loadNonCriticalResources, { timeout: 2000 });
      } else {
        setTimeout(loadNonCriticalResources, 2000);
      }
      
      // Load non-critical resources
      function loadNonCriticalResources() {
        // Load non-critical CSS
        const styles = [
          'https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700&display=swap'
        ];
        
        styles.forEach(href => {
          const link = document.createElement('link');
          link.rel = 'stylesheet';
          link.href = href;
          link.media = 'print';
          link.onload = () => { link.media = 'all'; };
          document.head.appendChild(link);
        });
        
        // Load non-critical JavaScript
        const scripts = [
          // Add any non-critical scripts here
        ];
        
        scripts.forEach(src => {
          const script = document.createElement('script');
          script.src = src;
          script.async = true;
          document.body.appendChild(script);
        });
      }
      
      // Track font loading
      document.fonts.ready.then(() => {
        document.documentElement.classList.remove('font-loading');
        document.documentElement.classList.add('font-loaded');
      });
      
      // Register service worker
      if ('serviceWorker' in navigator && window.location.hostname !== 'localhost') {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then(registration => {
              console.log('ServiceWorker registration successful');
              registration.update();
            })
            .catch(err => {
              console.log('ServiceWorker registration failed: ', err);
            });
        });
      }
      
      // Track page views
      if (navigator.onLine && 'sendBeacon' in navigator) {
        const data = new FormData();
        data.append('url', window.location.href);
        data.append('referrer', document.referrer);
        navigator.sendBeacon('/api/analytics/pageview', data);
      }
    </script>
  </body>
</html>
